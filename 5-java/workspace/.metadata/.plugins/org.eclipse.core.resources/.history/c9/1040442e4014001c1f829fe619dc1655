package todo;

import java.util.Collections;
import java.util.Map;
import java.util.TreeMap;
import java.util.concurrent.atomic.AtomicLong;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class Todocontroller {
	public static Map<Long, Todo> todoMap = Collections.synchronizedMap(new TreeMap<Long, Todo>());
	public AtomicLong id = new AtomicLong();

	@GetMapping (value="/todos")
	public Collection<Todo> getTodos(){

		Long currentId = maxId.incrementAndGet();
		Todo todo = Todo.builder()
				.id(currentId)
				.memo("test 1")
				.createdTime(new Date()
				.getTime())
				build();
		
		return todoMap.values();
	}
}
