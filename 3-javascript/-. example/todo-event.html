<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We"
      crossorigin="anonymous"
    />
    <title>할 일 관리</title>
  </head>

  <body style="width: 500px" class="mx-auto">
    <!-- todo는 일단 500px, 연락처관리는 더 넓게 짜야할 것.-->
    <h2 class="text-center mt-5">할 일 관리</h2>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj"
      crossorigin="anonymous"
    ></script>

    <form id="form-input" class="d-flex" onsubmit="return false">
      <input id=txt-memo" type="text" class="form-control me-2" placeholder="할 일 ..." />
      <button id=btn-add" type="button" class="btn btn-secondary text-nowrap">추가</button>
    </form>

    <!-- 우리 과제는 table태그 이용할것임 -->
    <ul id="ul-list" class="list-group list-group-flush mt-3">
    </ul>

    <script>
    
    /*요소 선택 부분*/
    // form-id값 넣고 시작
    // 요소 선택
      const txtMemo = document.querySelector("#txt-memo");
      const btnAdd = document.querySelector("#btn-add");
      const ullist = document.querySelector("#ul-list")
      const formInput = document.querySelector("#form-input")

/* 이벤트 등록 부분 */
    // 입력박스(input)에 키보드 이벤트 추가
      txtMemo.addEventListener("keyup",(event)=>{
        // 엔터키를 입력했을 때만 화면에 추가하도록 함
        if (event.keyCode == 13){
          txtMemo.blur(); // 입력박스의 포커스를 초기화
          add(event);
         
        }
      });


    // 목록 추가 이벤트 함수
      function add(event) {
      //  console.log(event);
      //  console.log(event.target);
      console.log(txtMemo.value);


      // 빈값일 때 에러메세지 처리
      if(!txtMemo.value){
        alert("입력값을 입력해주세요.")

      // UI 템플릿
      const alertDiv = /*html*/`
      <div class="alert alert-danger alert- mt-2" role="alert" id="liveAlert">
        입력값을 입력 해 주세요.
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
      `;

        formInput.insertAdjacentHTML("afterend", alertDiv);


        reutrn;
      }



// 생성할 템플릿 뭊자열
// 삭제 버튼에 remove라는 임의의 클래스를 넣음
      const li = /*html*/`
      <li class="list-group-item">
        <i class = "bi bi-check-lg"></li>
           <button class="btn btn-outline-secondary btn-sm remove">삭제</button>
          ${txtMemo.value}
        </li>
        `     
        // ul요소에 추가
       ullist.insertAdjacentHTML("afterbegin",li);//검색하면 기록남는
        
       // form 요소
       formInput.reset();
      }


/* 이벤트 추가 부분 */      
    // 버튼에 이벤트 추가
      btnAdd.addEventListener("click", add);

    // ul 태그에 이벤트 추가
    ulList.addEventListener("click", remove);

     
// 목록 삭제 이벤트 함수
function remove(event){
// 이벤트를 발생시킨 요소의 class에 remove가 있으면
  if(event.target.className.includes("remove")){
// 삭제버튼
    const btnRemove = event.target; //event 발생시키는 요소가 btn이야.
// 삭제버튼의 부모 노드인 1
    console.log(brnRemove.parentNode);
    li.remove();
}
}


    </script>
  </body>

  <!--
    <form action="http://www.naver.com" method="GET">
      <input
        name="query"
        type="text"
        class="form-control"
        placeholder="할 일 ..."
      /

      <li class="list-group-item">
        An item
        <button class="btn btn-outline-secondary btn-sm">삭제</button>
      </li>
      <li class="list-group-item">A second item</li>
      <li class="list-group-item">A third item</li>
      <li class="list-group-item">A fourth item</li>
      <li class="list-group-item">And a fifth one</li>
-->

</html>
