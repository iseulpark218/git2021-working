// FileReader 객체가 파일 읽기를 완료하면 함수가 실행됨
  reader.onload = () => {
const dataUrl = reader.result;

if (file.type.includes("image")){
  elm = dataUrl.current?.files[0];


  };
}

<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!--bootstrap-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css"
    />

    <!--ds/타이틀-->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Rampart+One&display=swap"
      rel="stylesheet"
    />

    <!--ds/body-->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&display=swap"
      rel="stylesheet"
    />
    <title>Card UI, feed_박이슬</title>
  </head>

  <body
    class="mx-auto"
    style="width: 500px; font-family: 'Nanum Pen Script', cursive"
  >
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj"
      crossorigin="anonymous"
    ></script>
    <h1
      class="text-center mt-4"
      style="
        font-size: 30;
        color: rgb(253, 103, 128);
        font-family: 'Rampart One', cursive;
      "
    >
      PARKSTAGRAM
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="18"
        height="18"
        fill="currentColor"
        class="bi bi-instagram mb-5"
        viewBox="0 0 16 16"
      >
        <path
          d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z"
        />
      </svg>
    </h1>
    <form id="form-input" class="mt-3" onsubmit="return false;">
      <textarea
        id="txt"
        class="form-control mb-1"
        rows="5"
        placeholder="👉🏻 Leave a post here 👈🏻"
      ></textarea>
      <div class="d-flex mt-3">
        <input
          type="file"
          class="form-control me-1 pb-1"
          accept="image/png, image/jpeg, video/mp4"
          style="background-color: rgb(253, 167, 181, 0.7)"
        />
        <button
          id="btn-add"
          class="btn btn-dark text-nowrap btn-sm"
          type="button"
        >
          게시
        </button>
      </div>
    </form>
    <div id="content" class="mt-3"></div>
    <script>
      const formInput = document.querySelector("#form-input");
      const txt = document.querySelector("#txt");
      const fileInput = document.querySelector("input[type='file']");
      const btnAdd = document.querySelector("#btn-add");
      const content = document.querySelector("#content");

      btnAdd.addEventListener("click", () => {
        let empty;

        if (txt.value == "" && fileInput.files.length == 0) {
          empty = true;
        }

        if (empty) {
          const alertDiv = /*html*/ `
          <div id="alert" class="alert alert-dark alert-dismissible py-2 my-1" role="alert">
            게시글을 입력하거나, 파일을 선택 해 주세요.
            <button type="button" class="btn-close btn-sm p-1" data-bs-dismiss="alert" aria-label="Close"></button>

          </div>
          `;
          formInput.insertAdjacentHTML("afterend", alertDiv);

          /* 파일선택 후 preview 만들기 */
          /* 게시버튼 클릭 후 preview 지우기 */

          /* alert창 3초후 삭제하기
          function alert() {
            btnAdd.click(function () {
              clearTimeout({ alertDiv }, 2000);
            });
          }
            */

          return;
        }

        document.querySelectorAll(".alert").forEach((item) => item.remove());

        let media = "";

        console.log(fileInput.files[0]);
        const file = fileInput.files[0];

        if (file) {
          const reader = new FileReader();
          reader.readAsDataURL(file);

          reader.onload = () => {
            const dataUrl = reader.result;

            if (file.type.includes("image")) {
              media = /*html*/ `<img src=${dataUrl} class="card-img-top">`;
            } else {
              media = /*html*/ `<video src=${dataUrl} class="card-img-top" controls></video>`;
            }
            add();
          };
        } else {
          add();
        }

        function add() {
          const card = `
          <div class="card my-3">
            ${media}
            <div class="card-body">

              <!-- --------------------- svg link start--------------------- -->
            <svg class="m-1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-heart" viewBox="0 0 16 16">
              <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"/>
            </svg>
            <svg class="m-1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-chat" viewBox="0 0 16 16">
              <path d="M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z"/>
            </svg>
            <svg class="m-1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
              <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
              <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
            </svg>
              <!-- --------------------- svg link finish--------------------- -->

              <p class="card-text mt-3">${txt.value}</p>
         <!-- 줄바꿈 하고싶은데..... 안되네..
          txt.replace.replaceAll("\r\n","<br>"); -->

              <a href="#" class="link-secondary fs-6 float-end remove">
                삭제<svg
            id="svg-trash"
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            fill="currentColor"
            class="bi bi-trash remove mb-1"
            viewBox="0 0 16 16"
          >
            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" />
            <path
              fill-rule="evenodd"
              d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"
            />
          </svg>
                </a>
            </div>
          </div>
          `;

          content.insertAdjacentHTML("afterbegin", card);

          formInput.reset();
        }
      });
      content.addEventListener("click", (event) => {
        if (event.target.className.includes("remove")) {
          const card = event.target.closest(".card");
          card.remove();
        }
      });
    </script>
  </body>
  <footer>
    <p class="text-center">"게시글이 좋았다면 ❤를 눌러주세요"</p>
  </footer>
</html>




//-------------------------------------------//
import { useRef, useState } from "react";

import produce from "immer";

// 1건에 대한 타입
interface TodoState {
  id: number;
  memo: string | undefined;
  createTime: number;
}

const getTimeString = (unixtime: number) => {
  // Locale: timezone, currency 등
  // js에서는 브라우저의 정보를 이용함
  const dateTime = new Date(unixtime);
  return `${dateTime.toLocaleDateString()} ${dateTime.toLocaleTimeString()}`;
};

const Todo = () => {
  const [todoList, setTodoList] = useState<TodoState[]>([
    { id: 2, memo: "Typescript", createTime: new Date().getTime() },
    { id: 1, memo: "React State 연습", createTime: new Date().getTime() },
  ]);

  const inputRef = useRef<HTMLInputElement>(null);
  const formRef = useRef<HTMLFormElement>(null);
  const ulRef = useRef<HTMLUListElement>(null);

  const add = () => {
    const todo: TodoState = {
      id: todoList.length > 0 ? todoList[0].id + 1 : 1,
      memo: inputRef.current?.value,
      createTime: new Date().getTime(),
    };
    setTodoList(
      produce((state) => {
        state.unshift(todo);
      })
    );

    // 입력값 초기화
    formRef.current?.reset();
  };

  const del = (id: number, index: number) => {
    console.log(id);
    // immer로 state 배열 직접 조작(index로 삭제)
    setTodoList(
      produce((state) => {
        state.splice(index, 1);
      })
    );
  };

  return (
    <>
      <h2 className="text-center my-5">할 일 관리</h2>
      <form
        className="d-flex"
        ref={formRef}
        onSubmit={(e) => e.upreventDefalt()}
      >
        <input
          type="text"
          className="form-control me-2"
          placeholder="할 일 ..."
          ref={inputRef}
        />
        <button
          type="button"
          className="btn btn-primary text-nowrap"
          onClick={() => {
            add();
          }}
        >
          추가
        </button>
      </form>
      <ul id="ul-list" className="list-group list-group-flush mt-3" ref={ulRef}>
        {/* 데이터와 UI요소 바인딩 */}
        {todoList.map((item, index) => (
          <li className="list-group-item d-flex" key={item.id}>

            <div className="w-100">

              <span className="me-1">{item.memo}</span>

              <span style={{ fontSize: "0.75rem" }}>
                - {getTimeString(item.createTime)}
              </span>
            </div>
            <button
              className="btn btn-outline-secondary btn-sm text-nowrap"
              onClick={() => {
                del(item.id, index);
              }}
            >
              삭제
            </button>
          </li>
        ))}
      </ul>
    </>
  );
};

export default Todo;


--------------------------------------------------------------

const add = () => {

// file(image/video)를 base64 문자열 -> data url로 변환 후 실행하기
// fileRef속성 객체에 걸린(input)게 파일이면 실행
if(fileRef.current?.files?.length){
  const file = fileRef.current?.files[0];
// FileReader 객체 생성
  const reader = new FileReader();
// file객체를 data url로 읽기
  reader.readAsDataURL(file);

// FileReader 객체가 파일 읽고 ->함수 실행됨
reader.onload = () => {
const dataUrl = reader.result;
console.log(file) // 실행해보면 file(img,video가 data url로 변환됨)


//fileRef.current?.value

setFeedList(
  produce((state) => {
    state.splice(index, 1);
  })
)

}
}
}

  const feed : FeedState = {
    id:feedList.length >0 ? feedList[0].id +1 : 1,
    content : textAreaRef.current?.value,
    dataUrl : fileRef.current?.value,
    createTime: new Date().getTime(),
    };

    setFeedList([feed, ...feedList]);

    //(검토중) textarea or 파일선택 시, 게시Alert나오게 수정하기..
   formRef.current?.reset();

   //(검토중) 에러 메시지 제거
    setIsError(false);
  }

 const del = (id: number) => {
    setFeedList(feedList.filter((item) => item.id !== id));
  };
  
  